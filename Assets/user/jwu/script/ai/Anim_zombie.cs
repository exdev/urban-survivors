// ======================================================================================
// File         : Anim_zombie.cs
// Author       : Wu Jie 
// Last Change  : 09/27/2010 | 22:55:17 PM | Monday,September
// Description  : 
// ======================================================================================

///////////////////////////////////////////////////////////////////////////////
// usings
///////////////////////////////////////////////////////////////////////////////

using UnityEngine;
using System.Collections;

///////////////////////////////////////////////////////////////////////////////
// defines
///////////////////////////////////////////////////////////////////////////////

public class Anim_zombie : MonoBehaviour {

    ///////////////////////////////////////////////////////////////////////////////
    // properties
    ///////////////////////////////////////////////////////////////////////////////

    private AI_generic ai;
    private Animation anim;

    ///////////////////////////////////////////////////////////////////////////////
    // function
    ///////////////////////////////////////////////////////////////////////////////

    // ------------------------------------------------------------------ 
    // Desc: 
    // ------------------------------------------------------------------ 

    protected void InitAnim () {
        ai = GetComponent<AI_generic>();

        AnimationState state;
        anim = transform.GetComponent<Animation>();

        state = anim["walk"];
        state.layer = 1;
        state.wrapMode = WrapMode.Loop;
        state.weight = 1.0f;
        state.blendMode = AnimationBlendMode.Blend;
        state.enabled = true;

        state = anim["attack"];
        state.wrapMode = WrapMode.Loop;
        state.layer = 1;
        state.weight = 1.0f;
        state.normalizedSpeed = 1.0f;
    }

    // ------------------------------------------------------------------ 
    // Desc: 
    // ------------------------------------------------------------------ 

    protected void UpdateAnim () {
        if ( ai.state_move ) {
            anim.CrossFade("walk");
        }
        if ( ai.state_attack ) {
            anim.CrossFade("attack");
        }
    }

    // ------------------------------------------------------------------ 
    // Desc: 
    // ------------------------------------------------------------------ 

    protected void PostAnim () {
    }

    // ------------------------------------------------------------------ 
    // Desc: 
    // ------------------------------------------------------------------ 

    void Start () {
        InitAnim();
    }

    // ------------------------------------------------------------------ 
    // Desc: 
    // ------------------------------------------------------------------ 

    void Update () {
        UpdateAnim();
    }

    // ------------------------------------------------------------------ 
    // Desc: 
    // ------------------------------------------------------------------ 

    void LateUpdate () {
        PostAnim();
    }
}
